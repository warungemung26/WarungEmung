<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Warung Emung Praktis, Hemat, Dekat</title>

  <link rel="stylesheet" href="css/floating.css">
  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="css/search.css">
  <link rel="stylesheet" href="css/header.css">
  <link rel="stylesheet" href="css/hero.css">
  <link rel="stylesheet" href="css/popup-reg.css">
  <link rel="stylesheet" href="css/text-scrol.css">
  <link rel="stylesheet" href="css/qty-wa.css">
  <link rel="stylesheet" href="css/cat-modal.css">
  <link rel="stylesheet" href="css/grid-produk.css">
  <link rel="stylesheet" href="css/modal-cart.css">
  <link rel="stylesheet" href="css/notif-cart.css">
  <link rel="stylesheet" href="css/toast.css">
  <link rel="stylesheet" href="css/navigasi.css">
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#f6b042">

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-PYZMBZNKER"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-PYZMBZNKER');
  </script>
</head>
<body>
  
  <!-- Splash Screen -->
<div id="splash-screen">
  <img src="images/logo-warung.png" alt="Warung Emung Logo">
  <div id="splash-text">Warung Emung<br><small>Praktis, Hemat, Dekat</small></div>
</div>

  <button id="cat-float" title="Pilih Kategori"></button>
  <section id="home"><h2></h2>

<!-- ================= HEADER ================= -->
<header class="header">
  <div class="header-left">
    <img src="images/logo-warung.png" alt="Logo Warung Emung" class="logo">
    <div class="header-text">
      <h1>Warung Emung</h1>
      <p class="lead">Praktis, Hemat, Dekat<br>Gg. Subur Blok. Wanakaya RT01/RW02 No.26</p>
    </div>
  </div>
  <div class="header-right">
  </div>
</header>

<!-- ================= SEARCH ================= -->
<div style="display:flex;gap:6px;margin:16px 0">
  <input id="search" placeholder="ğŸ”Cari produk... (misal ketik merk: indomie)" style="flex:1;padding:10px;border-radius:8px;border:1px solid #ddd" />
  <button id="search-btn" style="padding:10px 16px;border:none;border-radius:8px;background:var(--accent);color:#fff;cursor:pointer">ğŸ”</button>
</div>

<!-- Help Center -->
<div class="header-right">
  <a href="pages/help-center.html" class="help-btn">ğŸ“© Help Center</a>
</div>

<!-- PENGUMUMAN BERJALAN -->
<div class="pengumuman">
  <marquee behavior="scroll" direction="left">
    âš ï¸ PERHATIAN: Saat ini semua stok belum tersedia â€” website masih dalam pengembangan âš ï¸
  </marquee>
</div>

<!-- ================= HERO ================= -->
<section class="hero">
  <h2 style="margin:0 0 8px">Belanja Harian Lebih Mudah</h2>
  <p style="margin:0 0 12px; color:#fff">
    Belanja harian gampang, tinggal klik â€” langsung kami antar! Buka setiap hari 06.00-22.00
  </p>
  <a id="wa-cta" 
     href="https://wa.me/6285322882512?text=Halo%20Warung%20Emung,%20saya%20ingin%20request%20produk:%20[NAMA%20PRODUK]%20dengan%20jumlah:%20[JUMLAH]%20Mohon%20informasinya."
     target="_blank"
     style="display:inline-flex;align-items:center;gap:10px;padding:12px 22px;background:#25d366;color:white;font-weight:600;border-radius:50px;text-decoration:none;box-shadow:0 4px 12px rgba(0,0,0,0.15);transition:all 0.3s ease;">
     <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="white" viewBox="0 0 24 24">
       <path d="M20.52 3.48A11.88 11.88 0 0 0 3.48 20.52l-1.96 7.18 7.36-1.92A11.88 11.88 0 0 0 20.52 3.48zM12 21c-5.52 0-10-4.48-10-10S6.48 1 12 1s10 4.48 10 10-4.48 10-10 10zM16 14c-.22 0-.44.03-.65.08-.21-.16-.88-.42-1.02-.46-.14-.04-.25-.06-.36.07s-.41.46-.5.56c-.09.09-.17.11-.32.04-.15-.07-.63-.23-1.2-.74-.44-.39-.74-.87-.82-1.02-.08-.15-.01-.23.06-.3.06-.06.14-.15.21-.23.07-.08.09-.14.14-.24.05-.09.02-.17-.01-.24-.03-.07-.36-.87-.49-1.19-.13-.32-.26-.28-.36-.28-.09 0-.19 0-.29 0-.1 0-.24.03-.37.17-.13.13-.5.48-.5 1.17 0 .69.51 1.36.58 1.45.07.09 1 1.52 2.44 2.14.34.15.6.24.81.31.34.11.65.09.89.06.27-.04.88-.36 1.01-.71.13-.35.13-.65.09-.71-.04-.06-.14-.09-.29-.15z"/>
     </svg>
     Request Stok
  </a>
  <p style="margin-top:8px;font-size:12px;color:#fff;">
    Cara pakai: ganti <strong>[NAMA PRODUK]</strong> & <strong>[JUMLAH]</strong> sesuai keinginan Anda sebelum mengirim.
  </p>
</section>

<!-- POPUP REGISTER -->
<div id="register-backdrop" aria-hidden="false" style="display:none;">
  <div id="register-modal" role="dialog" aria-modal="true">
    <h3>Daftar Pelanggan Warung Emung</h3>
    <p>Untuk mengakses layanan & memesan online, silakan daftar terlebih dahulu via WhatsApp.</p>
    <button id="btn-register-wa" class="register-btn register-wa">Daftar via WhatsApp</button>
    <button id="btn-registered" class="register-btn register-done">Saya sudah daftar âœ…, lanjut belanja</button>
    <a class="small-link" href="#" id="register-hint">Saya belum sempat kirim pesan apa perlu?</a>
  </div>
</div>

<button id="open-cart" class="cart-btn" title="Keranjang">ğŸ›’<span id="cart-count" class="cart-count" style="display:none">0</span></button>

<!-- ================= MENU KATEGORI ================= -->
<h3 style="margin-top:22px">Pilih Kategori</h3>
<div class="kategori-grid">
  <div class="cat" onclick="setCategory('')"><span>ğŸ›’ Semua</span></div>
  <div class="cat" onclick="setCategory('sembako')"><span>ğŸšğŸ¥• Sembako</span></div>
  <div class="cat" onclick="setCategory('makanan')"><span>ğŸŒ¯ğŸ¢ Makanan Cepat Saji</span></div>
  <div class="cat" onclick="setCategory('mie')"><span>ğŸœ Mie Instan</span></div>
  <div class="cat" onclick="setCategory('snack')"><span>ğŸ¿ğŸ­ Snack & Ringan</span></div>
  <div class="cat" onclick="setCategory('minuman')"><span>ğŸ¥¤ Minuman Dingin</span></div>
  <div class="cat" onclick="setCategory('minumansachet')"><span>ğŸ¥› Minuman Sachet & ğŸ’Š Obat-obatan</span></div>
  <div class="cat" onclick="setCategory('rumah')"><span>ğŸ§´ğŸ›€ Kebutuhan Rumah</span></div>
</div>

<!-- ================= ETALASE ================= -->
<h3 style="margin-top:22px">Etalase Warung</h3>
<div id="produk-list"></div>

<!-- ================= MODAL KERANJANG ================= -->
<div id="cart-modal" class="modal" role="dialog" aria-hidden="true">
  <h4>Keranjang Anda</h4>
  <div id="cart-items"></div>
  <div class="total" id="cart-total"></div>
  <div style="display:flex;gap:8px;margin-top:8px">
    <button id="wa-cart" class="wa-btn">Pesan Semua via WA</button>
    <button id="clear-cart" class="add-btn" style="background:#ff4b4b;color:#fff;">Kosongkan</button>
  </div>
</div>

<footer>Warung Emung â€” Praktis, Hemat, Dekat â€¢ Hubungi via WhatsApp untuk pesanan</footer>
<div id="toast">Berhasil</div>

<!-- ================= CATEGORY MODAL ================= -->
<div id="cat-modal-backdrop">
  <div id="cat-modal" role="dialog" aria-hidden="true">
    <button id="close-cat" class="close-btn">â</button>
    <h4 style="margin-top:4px">Pilih Kategori</h4>
    <div id="cat-options" style="display:grid; grid-template-columns:repeat(2,1fr); gap:10px; margin-top:10px;">
      <div class="cat" data-cat="">ğŸ›’ Semua</div>
      <div class="cat" data-cat="sembako">ğŸšğŸ¥• Sembako</div>
      <div class="cat" data-cat="makanan">ğŸŒ¯ğŸ¢ Makanan Cepat Saji</div>
      <div class="cat" data-cat="mie">ğŸœ Mie Instan</div>
      <div class="cat" data-cat="snack">ğŸ¿ğŸ­ Snack & Ringan</div>
      <div class="cat" data-cat="minuman">ğŸ¥¤ Minuman Dingin</div>
      <div class="cat" data-cat="minumansachet">ğŸ¥› Minuman Sachet & ğŸ’Š Obat-obatan</div>
      <div class="cat" data-cat="rumah">ğŸ§´ğŸ›€ Kebutuhan Rumah</div>
    </div>
  </div>
</div>

<div class="bottom-nav">
  <a href="#home"><span>ğŸ </span>Beranda<br></a>
  <a href="#cat"><span>ğŸ“™</span>Kategori<br></a>
  <a href="#search"><span>ğŸ”</span>Cari<br></a>
  <a href="https://wa.me/6285322882512?text=Halo%20Warung%20Emung,%20saya%20ingin%20cek%20pesanan" target="_blank" id="wa-nav-btn"><span>ğŸ’¬</span>Cek</a>
  <a href="#cart" id="cart-btn"><span>ğŸ›’</span>Troli</a>
</div>

<button id="installBtn" style="position:fixed;bottom:110px;right:12px;z-index:9999;display:none;border-radius:10px;padding:8px 12px;background:#f6b042;color:#fff">
  â• Pasang di Layar Utama
</button>

<!-- ================= SCRIPT FILES ================= -->
<script src="js/main.js"></script>
<script src="js/search.js"></script>
<script src="js/data-loader.js"></script>
<script src="js/toast-audio.js"></script>
<script src="js/cart.js"></script>
<script src="js/pwa.js"></script>
<script src="service-worker.js"></script>
<script src="js/register.js"></script>

<script>
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('sw.js')
      .then(reg => console.log('âœ… Service Worker terdaftar:', reg.scope))
      .catch(err => console.log('âŒ SW error:', err));
  });
}
</script>

<!-- ================= AUTO VERSION SCRIPT ================= -->
<script>
(function(){
  const version = new Date().toISOString().slice(0,10).replace(/-/g,'');
  document.querySelectorAll('link[rel="stylesheet"]').forEach(link=>{
    const href=link.getAttribute('href');
    if(href&&!href.includes('?v=')){link.setAttribute('href',href+'?v='+version);}
  });
  document.querySelectorAll('script[src]').forEach(script=>{
    const src=script.getAttribute('src');
    if(src&&!src.includes('?v=')&&!src.includes('gtag')){script.setAttribute('src',src+'?v='+version);}
  });
})();
</script>

</body>
</html>
