<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Warung Emung Praktis, Hemat, Dekat</title>
  
<!-- ================== CSS ================== -->
  <!-- Base / umum -->
<link rel="stylesheet" href="css/ui.css">           
<link rel="stylesheet" href="css/flash.css">

<!-- Modals & komponen spesifik -->
<link rel="stylesheet" href="css/popup-reg.css">   
<link rel="stylesheet" href="css/produk-modal.css">   
<link rel="stylesheet" href="css/cart-modal.css">  
<link rel="stylesheet" href="css/cat-modal.css">   
<link rel="stylesheet" href="css/akun-modal.css">  

<!-- Fitur tambahan -->
<link rel="stylesheet" href="css/qty-addcart.css"> 
<link rel="stylesheet" href="css/nama-alamat.css"> 
<link rel="stylesheet" href="css/search.css">      

<!-- Helper / state -->
<link rel="stylesheet" href="css/toast.css">       
<link rel="stylesheet" href="css/text-scrol.css">  



  <!-- ================== PWA META ================== -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#f6b042">



<script>
// ================= UNREGISTER LAMA SW =================
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.getRegistrations().then(regs => {
    regs.forEach(reg => {
      reg.unregister().then(() => {
        console.log('✅ SW lama dihapus:', reg.scope);
      });
    });
  });
}
</script>
	
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-PYZMBZNKER"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-PYZMBZNKER');
</script>

</head>
<body>


<!-- ===== HEADER MINI PROFESIONAL ===== -->
<header class="header-mini">

  <img src="images/logo-warung.png" class="logo-mini" alt="Logo">

  <!-- SEARCH WRAPPER -->
  <div class="search-wrap">
    <input id="search" type="text" placeholder="Cari produk..." class="search-mini" autocomplete="off">

    <!-- CLEAR SEARCH -->
    <button id="search-clear" class="search-icon-clear">
      <i class="fa-solid fa-xmark"></i>
    </button>

    <ul id="search-suggestions" class="search-suggestions"></ul>
  </div>

  <!-- SEARCH BTN -->
  <button id="search-btn" class="search-btn icon-btn">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>

  <!-- MENU BTN -->
  <button id="menu-btn" class="menu-btn icon-btn">
    <i class="fa-solid fa-bars"></i>
  </button>

</header>


<!-- ===== SIDEBAR RIGHT ===== -->
<div id="sidebar" class="sidebar">
  <div class="sidebar-header">
    <h3>Pengaturan</h3>
    <button id="close-sidebar" class="close-btn">✖</button>
  </div>

  <!-- Tombol Keranjang -->
  <button id="open-cart" class="cart-btn" title="Keranjang">
    <i class="fa-solid fa-cart-shopping"></i>
    <span id="cart-count" class="cart-count">0</span>
  </button>

  <ul class="sidebar-menu">
    <!-- Akun -->
    <li id="nav-accountk">
      <i class="fa-solid fa-user"></i>
      <span>Profil Saya</span>
    </li>

    <!-- Mode Gelap -->
    <li class="dark-mode-toggle">
      <i class="fa-solid fa-moon"></i>
      <span>Mode Gelap</span>
      <label class="switch">
        <input type="checkbox" id="dark-toggle">
        <span class="slider"></span>
      </label>
    </li>

    <!-- Notifikasi Suara -->
    <li class="toggle-toast">
      <i class="fa-solid fa-bell"></i>
      <span>Notifikasi Suara</span>
      <label class="switch">
        <input type="checkbox" id="toast-toggle">
        <span class="slider"></span>
      </label>
    </li>

    <!-- Tema Warna -->
    <li class="theme-select">
      <i class="fa-solid fa-palette"></i>
      <span>Tema Warna</span>
      <select id="theme-select">
        <option value="default">Default</option>
        <option value="red">Merah</option>
        <option value="blue">Biru</option>
        <option value="green">Hijau</option>
      </select>
    </li>

<li id="edit-alamat">
  <i class="fa-solid fa-location-dot"></i>
  <span>Ubah Alamat Pengiriman</span>
</li>

    <li>
      <i class="fa-solid fa-box"></i>
      <span>Status Pesanan</span>
    </li>

    <!-- Bantuan -->
    <li class="help-btn">
      <a href="pages/help-center.html">
        <i class="fa-solid fa-circle-question"></i>
        <span>Bantuan</span>
      </a>
    </li>

 <li id="reset-data" class="cta-link">
  <i class="fa-solid fa-broom"></i>
  <span>Reset Data Lokal</span>
</li>

<!-- Tentang -->
<li id="nav-about">
  <i class="fa-solid fa-info-circle"></i>
  <span>Tentang Warung Emung</span>
</li>
  </ul>
</div>

<!-- BACKDROP -->
<div id="sidebar-backdrop" class="sidebar-backdrop"></div>


<section id="home"><h2></h2></section>

<!-- ================= MENU KATEGORI BARU ================= -->
<h3 style="margin:10px 0;">Pilih Kategori</h3>

<div class="cat-wrapper">
  <button class="cat-arrow left" onclick="slideCat(-1)">❮</button>

  <div class="kategori-grid" id="cat-scroll">

    <div class="cat active" onclick="setCategory('')">
      <img src="icons/all.png" class="cat-icon">
      <span>Semua</span>
    </div>

    <div class="cat" onclick="setCategory('sembako')">
      <img src="icons/sembako.png" class="cat-icon">
      <span>Sembako</span>
    </div>

    <div class="cat" onclick="setCategory('bumbu')">
      <img src="icons/bumbu.png" class="cat-icon">
      <span>Bumbu</span>
    </div>

    <div class="cat" onclick="setCategory('mie')">
      <img src="icons/mie.png" class="cat-icon">
      <span>Mie Instan</span>
    </div>

    <div class="cat" onclick="setCategory('snack')">
      <img src="icons/snack.png" class="cat-icon">
      <span>Snack</span>
    </div>

    <div class="cat" onclick="setCategory('roti')">
      <img src="icons/roti.png" class="cat-icon">
      <span>Roti</span>
    </div>

    <div class="cat" onclick="setCategory('makanan')">
      <img src="icons/makanan.png" class="cat-icon">
      <span>Makanan</span>
    </div>

    <div class="cat" onclick="setCategory('minuman')">
      <img src="icons/minuman.png" class="cat-icon">
      <span>Minuman</span>
    </div>

    <div class="cat" onclick="setCategory('minumansachet')">
      <img src="icons/sachet.png" class="cat-icon">
      <span>Kopi </span>
    </div>

    <div class="cat" onclick="setCategory('frozen')">
      <img src="icons/frozen.png" class="cat-icon">
      <span>Frozen</span>
    </div>

    <div class="cat" onclick="setCategory('rokok')">
      <img src="icons/rokok.png" class="cat-icon">
      <span>Rokok</span>
    </div>

    <div class="cat" onclick="setCategory('obat')">
      <img src="icons/obat.png" class="cat-icon">
      <span>Obat</span>
    </div>

    <div class="cat" onclick="setCategory('rumah')">
      <img src="icons/rumah.png" class="cat-icon">
      <span>Sabun</span>
    </div>

    <div class="cat" onclick="setCategory('peralatandapur')">
      <img src="icons/peralatandapur.png" class="cat-icon">
      <span>Peralatan</span>
    </div>
    
    <div class="cat" onclick="setCategory('peralatansekolah')">
      <img src="icons/peralatansekolah.png" class="cat-icon">
      <span>Alat Sekolah</span>
    </div>
    
    <div class="cat" onclick="setCategory('peralatansekolah')">
      <img src="icons/toy.png" class="cat-icon">
      <span>Mainan</span>
    </div>

<div class="cat" onclick="setCategory('outfit')">
      <img src="icons/outfit.png" class="cat-icon">
      <span>Pakaian</span>
    </div>
    
    <div class="cat" onclick="setCategory('sandal')">
      <img src="icons/sandal.png" class="cat-icon">
      <span>Pakaian</span>
    </div>

    <div class="cat" onclick="setCategory('lainnya')">
      <img src="icons/other.png" class="cat-icon">
      <span>Lainnya</span>
    </div>

  </div>

  <button class="cat-arrow right" onclick="slideCat(1)">❯</button>
</div>

<!-- ================= KATEGORI MODAL ================= -->
<div id="cat-modal-backdrop">
  <div id="cat-modal" role="dialog" aria-hidden="true">

    <!-- HEADER (TIDAK SCROLL) -->
    <button id="close-cat" class="close-btn"><i class="fa-solid fa-xmark"></i></button>

    <h4 class="cat-title">
      <i class="fa-solid fa-list"></i> Pilih Kategori
    </h4>

    <!-- BODY (YANG SCROLL) -->
    <div class="cat-body">
      <div id="cat-options">

        <div class="cat" data-cat="">
          <i class="fa-solid fa-cart-shopping"></i> Semua Produk
        </div>

        <div class="cat" data-cat="sembako">
          <i class="fa-solid fa-bowl-rice"></i> Sembako, Beras, Telur, Daging, Ikan, dll
        </div>

        <div class="cat" data-cat="bumbu">
          <i class="fa-solid fa-pepper-hot"></i> Bumbu Dapur
        </div>

        <div class="cat" data-cat="mie">
          <i class="fa-solid fa-bowl-food"></i> Mie Instan
        </div>

        <div class="cat" data-cat="snack">
          <i class="fa-solid fa-cookie-bite"></i> Snack, Jajanan Anak, dll
        </div>

        <div class="cat" data-cat="toy">
          <i class="fa-solid fa-puzzle-piece"></i> Mainan Anak
        </div>

        <div class="cat" data-cat="roti">
          <i class="fa-solid fa-bread-slice"></i> Roti & Kue
        </div>

        <div class="cat" data-cat="makanan">
          <i class="fa-solid fa-burger"></i> Makanan Siap Saji
        </div>

        <div class="cat" data-cat="minuman">
          <i class="fa-solid fa-bottle-water"></i> Minuman Botol/Cup/Kotak
        </div>

        <div class="cat" data-cat="minumansachet">
          <i class="fa-solid fa-mug-hot"></i> Minuman Sachet
        </div>

        <div class="cat" data-cat="frozen">
          <i class="fa-solid fa-snowflake"></i> Ice Cream & Frozen Food
        </div>

        <div class="cat" data-cat="rokok">
          <i class="fa-solid fa-fire-flame-simple"></i> Rokok
        </div>

        <div class="cat" data-cat="obat">
          <i class="fa-solid fa-capsules"></i> Obat Harian
        </div>

        <div class="cat" data-cat="rumah">
          <i class="fa-solid fa-pump-soap"></i> Sabun & Perlengkapan Toilet
        </div>

        <div class="cat" data-cat="peralatan">
          <i class="fa-solid fa-screwdriver-wrench"></i> Peralatan Rumah Tangga
        </div>

        <div class="cat" data-cat="peralatansekolah">
          <i class="fa-solid fa-pen-ruler"></i> Peralatan Sekolah
        </div>

        <div class="cat" data-cat="outfit">
          <i class="fa-solid fa-shirt"></i> Pakaian
        </div>
        
        <div class="cat" data-cat="sandal">
          <i class="fa-solid fa-shirt"></i> Aneka Sandal
        </div>

        <div class="cat" data-cat="lainnya">
          <i class="fa-solid fa-ellipsis"></i> Lainnya
        </div>

      </div>
    </div>

  </div>
</div>

<!-- PENGUMUMAN BERJALAN -->
<div class="pengumuman">
  <marquee behavior="scroll" direction="left">
    ⚠️ PEMBERITAHUAN: Seluruh data produk dan stok masih bersifat simulasi. Silakan lakukan uji coba pemesanan dan laporkan jika menemukan error atau kendala. Terima kasih. ⚠️
  </marquee>
</div>
<!-- ================= HERO ================= -->
<section class="hero">
  <h2 style="margin:0 0 8px">Belanja Harian Lebih Mudah</h2>
  <p style="margin:0 0 12px; color:#fff">
    Belanja harian gampang, tinggal klik — langsung kami antar! Buka setiap hari 06.00-22.00
  </p>

<!-- Tombol Request Stok Modern -->
<div class="hero-cta">
  <a class="cta-link wa-hero" 
     href="https://wa.me/6285322882512?text=Halo%20Warung%20Emung,%20saya%20ingin%20request%20produk:%20[NAMA%20PRODUK]%20dengan%20jumlah:%20[JUMLAH]%20Mohon%20informasinya."
     id="wa-hero-cta">
     <i class="fa-brands fa-whatsapp"></i>
     <span>Request Stok</span>
  </a>

  <p class="wa-cta-instructions">
    Produk tidak ada? Tekan tombol <strong>Request Stok Sekarang</strong> &amp; tulis <strong>nama produk</strong> + <strong>jumlah</strong>.
  </p>
</div>
</section>


<!-- ============================
     MODAL DETAIL PRODUK (SLIDE UP)
     ============================ -->
<div id="product-modal" class="pm-backdrop">
  <div class="pm-sheet">

    <!-- TOPBAR -->
    <div class="pm-topbar">
      <button class="pm-back"><i class="fa fa-arrow-left"></i></button>
      <button class="pm-close"><i class="fa fa-times"></i></button>
    </div>

    <div class="pm-handle"></div>

    <img class="pm-img" src="" alt="">
    <div class="pm-title"></div>
    <div class="pm-price"></div>
    <div class="pm-desc"></div>

    <div class="pm-qty">
      <button class="pm-minus">−</button>
      <span class="pm-number">1</span>
      <button class="pm-plus">+</button>
    </div>

    <button class="pm-add">
      <i class="fa fa-cart-plus"></i> Tambah ke Keranjang
    </button>

  </div>
</div>

<!-- ================= FLASH SALE ================= -->
<div id="flash-section">
  <h3 class="flash-title-section">⚡ Flash Sale Hari Ini</h3>
  <div id="flash-list" class="flash-wrapper"></div>
</div>
<!-- FILTER HARGA -->
	<div style="margin-bottom:12px;">
  <label for="filter-price" style="font-weight:bold;">
    <i class="fa fa-filter"></i> Urutkan Harga
  </label>
<i class="filter-container"></i>
  <select id="filter-harga">
    <option value="">Default</option>
    <option value="low">⬇️ Termurah</option>
    <option value="high">⬆️ Termahal</option>
  </select>
</div>


<!-- ================= ETALASE WARUNG ================= -->
<h3 class="etalase-title" style="margin-top:22px">Etalase Warung</h3>
<div id="produk-list"></div>

<!-- ================= FLOATING FLASH BUTTON ================= -->
<button id="flash-btn">
  <img src="images/flash.png" alt="Flash Icon">
  <span class="flash-text">FLASH</span>
</button>

  <!-- ================= CART MODAL ================= -->
  <!-- BACKDROP -->
<div id="cart-backdrop" class="modal-backdrop" aria-hidden="true"></div>

<!-- CART MODAL -->
<div id="cart-modal" class="modal" role="dialog" aria-hidden="true">
  <h4>Keranjang Anda</h4>

  <div id="cart-items"></div>
  <div class="total" id="cart-total"></div>

  <div style="display:flex;gap:8px;margin-top:8px">
    <button id="wa-cart" class="wa-btn">
      Pesan Semua via <i class="fa-brands fa-whatsapp"></i>
    </button>
  <button id="clear-cart" class="add-btn cta-clear-cart" style="background:#ff4b4b;color:#fff;">
  Kosongkan
</button>

  </div>
</div>
  </div>

  <!-- ================= FOOTER ================= -->
  <footer>Warung Emung — Praktis, Hemat, Dekat • Hubungi via WhatsApp untuk pesanan</footer>

  <!-- ================= TOAST NOTIF ================= -->
  <div id="toast">Berhasil</div>

<!-- REGISTER POPUP -->
<div id="register-backdrop" class="modal-backdrop" style="display:none;">
  <div id="register-modal" class="reg-modal-box">

    <!-- STEP 1: PILIHAN AWAL -->
    <div id="reg-step1" class="reg-step active">
      <h3>Selamat Datang!</h3>
      <p>Daftar untuk menjadi pelanggan Warung Emung.</p>

      <div class="reg-actions reg-actions-bottom">
        <button id="btn-register-now" class="primary big-btn">Daftar Sekarang</button>
        <button id="btn-register-later" class="secondary big-btn">Daftar Nanti</button>
      </div>
    </div>

    <!-- STEP 2: FORM PENDAFTARAN -->
    <div id="reg-step2" class="reg-step">
      <h3>Daftar Pelanggan</h3>
      <p>Data disimpan di perangkat Anda.</p>

      <!-- AREA SCROLL -->
      <div class="reg-scroll-area">

        <div class="reg-form">
          <label>Nama Lengkap:</label>
          <input type="text" id="reg-nama" placeholder="Contoh: Budi Setiawan">

          <label>Alamat:</label>
          <input type="text" id="reg-alamat" value="Blok Wanakaya" readonly>

          <label>Nomor Rumah:</label>
          <input type="number" id="reg-no" placeholder="17" min="1" max="999">

          <label>RT / RW:</label>
          <select id="reg-rtrw">
          <option value="">Pilih RT / RW</option>
          <option value="01/01">01/01</option>
          <option value="01/02">01/02</option>
          <option value="01/03">01/03</option>
          <option value="02/01">02/01</option>
          <option value="02/02">02/02</option>
          <option value="02/03">02/03</option>
        </select>

          <label>Nomor HP (opsional):</label>
          <input type="text" id="reg-hp" placeholder="08123xxxxxxx">
        </div>

      </div>

      <!-- TOMBOL BAWAH -->
      <div class="reg-actions reg-actions-bottom">
        <button id="btn-back-register" class="secondary">Kembali</button>
        <button id="btn-save-register" class="primary">Simpan Data</button>
      </div>

      <small id="register-hint"></small>
    </div>

  </div>
</div>


<!-- ACCOUNT MODAL -->
<div id="account-backdrop" class="modal-backdrop">
  <div id="account-modal" class="modal-box">
    <h3>Akun Saya</h3>

    <!-- TAB -->
    <div class="acc-tabs">
      <button class="tab-btn active" data-tab="tab-profil">Profil</button>
      <button class="tab-btn" data-tab="tab-riwayat">Riwayat</button>
    </div>

    <!-- AREA SCROLL -->
    <div class="acc-scroll-area">

      <!-- === TAB PROFIL === -->
      <div class="tab-content active" id="tab-profil">
        <div class="pp-box">
          <img id="pp-preview" src="img/default-pp.png" alt="Foto Profil">
          <button id="btn-ubah-pp">Ubah Foto</button>
          <input type="file" id="pp-input" accept="image/*" style="display:none;">
        </div>

        <div class="acc-form">
          <label>Nama:</label>
          <input type="text" id="acc-nama">
          <label>Alamat:</label>
          <input type="text" id="acc-alamat">
          <label>Nomor Rumah:</label>
          <input type="text" id="acc-no">
          <label>RT / RW:</label>
          <input type="text" id="acc-rt">
          <label>Nomor HP (opsional):</label>
          <input type="text" id="acc-hp">
        </div>
      </div>

      <!-- === TAB RIWAYAT === -->
      <div class="tab-content" id="tab-riwayat">
        <div id="riwayat-list"></div>
      </div>

    </div>

    <!-- TOMBOL BAWAH FIX -->
    <div class="acc-actions acc-actions-bottom">
      <button id="acc-close-btn" class="secondary">Tutup</button>
      <button id="acc-save-btn" class="primary">Simpan Perubahan</button>
    </div>

  </div>
</div>


<!-- ==== NAVIGASI ==== -->
<div class="bottom-nav">
  <a href="#home" id="nav-home" class="active">
    <i class="fa-solid fa-house"></i>
    <span>Beranda</span>
  </a>

  <a href="#cat" id="nav-cat">
    <i class="fa-solid fa-list"></i>    
    <span>Kategori</span>
  </a>

  <a href="#search" id="nav-search">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span>Cari</span>
  </a>

<a href="#account" id="nav-account">
  <i class="fa-solid fa-user"></i>
  <span>Akun</span>
</a>

<a class="cta-link wa-nav"
   href="https://wa.me/6285322882512?text=Halo%20Warung%20Emung,%20saya%20ingin%20cek%20pesanan%20saya."
   aria-label="Cek pesanan"
   title="Cek pesanan">
   <i class="fa-solid fa-truck-fast"></i>
   <span class="label">Cek Pesanan</span>
</a>

  <a href="#cart" id="nav-cart">
    <i class="fa-solid fa-cart-shopping"></i>
    <span>Troli</span>
    <div class="badge" id="cart-badge">0</div>
  </a>
</div>

<!-- ==== PWA INSTALL BUTTON PRO ==== -->
<button id="installBtn" class="pwa-install-btn" style="display:none;">
  <img src="images/logo-warung.png" class="pwa-logo">
  <span>Instal Warung Emung</span>
  <i class="fa-solid fa-cloud-arrow-down"></i>
</button>


<!-- Modal Konfirmasi Global -->
<div id="modal-confirm" class="modal-confirm">
  <div class="modal-content">
    <h3 id="modal-title">Konfirmasi</h3>
    <p id="modal-message">Apakah Anda yakin ingin melanjutkan?</p>
    
    <!-- Form input WA (hanya muncul jika WA) -->
    <div id="modal-wa-inputs" style="display:none; margin-top:10px;">
      <input type="text" id="modal-produk" placeholder="Nama Produk" />
      <input type="number" id="modal-jumlah" placeholder="Jumlah" />
    </div>

    <div class="modal-buttons">
      <button id="modal-cancel" class="btn-secondary">Batal</button>
      <button id="modal-ok" class="btn-primary">Ya</button>
    </div>

<!-- Modal Global -->
<div id="modal-confirm" class="modal-confirm">
  <div class="modal-content">
    <h3 id="modal-title">Konfirmasi</h3>
    <div id="modal-body" style="margin-top:10px;">
     
 <!-- Konten dinamis masuk sini -->
    </div>
    <div class="modal-buttons">
      <button id="modal-cancel" class="btn-secondary">Batal</button>
      <button id="modal-ok" class="btn-primary">Simpan</button>
    </div>
  </div>
</div>


  <!-- ================== JAVASCRIPT ================== -->
  <!-- Core / data -->
  <script src="js/elementtt.js"></script>
<script src="js/data-loader.js"></script>
<script src="js/main.js"></script>
<script src="js/flash.js"></script>

<!-- Fitur utama -->
<script src="js/sidebar.js"></script>
<script src="js/search.js"></script>
<script src="js/search-autocomplete.js"></script>
<script src="js/produk-modal.js"></script>
<script src="js/cta-links.js"></script>
<script src="js/tentang.js"></script>
<script src="js/cat-modal.js"></script>
<script src="js/cart-modal.js"></script>
<script src="js/akun-modal.js"></script>
<script src="js/toast-audio.js"></script>
<script src="js/register.js"></script>


<!-- PWA / install -->
<script src="js/pwa.js"></script>

<!-- Auto versioning cache bust -->
<script>
(function(){
  const version = new Date().toISOString().slice(0,10).replace(/-/g,'');
  document.querySelectorAll('link[rel="stylesheet"]').forEach(link=>{
    const href=link.getAttribute('href');
    if(href&&!href.includes('?v=')){link.setAttribute('href',href+'?v='+version);}
  });
  document.querySelectorAll('script[src]').forEach(script=>{
    const src=script.getAttribute('src');
    if(src&&!src.includes('?v=')&&!src.includes('gtag')){script.setAttribute('src',src+'?v='+version);}
  });
})();
</script>

<!-- Service Worker: paling akhir -->
<script>
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('sw.js')
      .then(reg => console.log('✅ Service Worker terdaftar:', reg.scope))
      .catch(err => console.log('❌ SW error:', err));
  });
}
</script>




</body>

</html>
